/**
 * æµ‹è¯•è„šæœ¬
 * ç›´æ¥ç”Ÿæˆæµ‹è¯•é¡¹ç›®ï¼Œå¯ç”¨æ‰€æœ‰åŠŸèƒ½
 */

import { generateProject } from './generators/project'
import type { ProjectConfig } from './types'

/**
 * æµ‹è¯•é…ç½®ï¼ˆå¯ç”¨æ‰€æœ‰åŠŸèƒ½ï¼‰
 */
const testConfig: ProjectConfig = {
  projectName: 'vite-cli-test',
  description: 'Test project generated by vite-cli',
  author: 'vite-cli',
  framework: 'vue',
  uiLibrary: 'element-plus',
  routeMode: 'file-system',
  i18n: true,
  qiankun: true,
  sentry: true,
  packageManager: 'pnpm',
  targetDir: process.cwd().replace(/vite-cli$/, '') + 'vite-cli-test',
}

/**
 * è¿è¡Œæµ‹è¯•
 */
async function runTest() {
  try {
    console.log('ğŸš€ Starting test project generation...\n')
    console.log('Configuration:')
    console.log(`  Framework: ${testConfig.framework}`)
    console.log(`  UI Library: ${testConfig.uiLibrary}`)
    console.log(`  Route Mode: ${testConfig.routeMode}`)
    console.log(`  i18n: ${testConfig.i18n}`)
    console.log(`  Qiankun: ${testConfig.qiankun}`)
    console.log(`  Sentry: ${testConfig.sentry}`)
    console.log(`  Target: ${testConfig.targetDir}\n`)

    await generateProject(testConfig)
    console.log('\nâœ… Test project generated successfully!')
    console.log(`\nğŸ“ Project location: ${testConfig.targetDir}`)
  }
  catch (error) {
    console.error('\nâŒ Error:', error)
    process.exit(1)
  }
}

runTest()

