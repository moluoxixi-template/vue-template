<%
// 构建 dependencies 对象
const dependencies = {}

// UI 库依赖
if (isAntDesign) {
  dependencies['@ant-design/icons'] = '^5.6.1'
  dependencies['antd'] = '^5.25.2'
}

// 核心依赖
dependencies['@moluoxixi/ajax-package'] = '^0.0.16'
dependencies['@moluoxixi/class-names'] = '^0.0.3-beta.1'
dependencies['crypto-js'] = '^4.2.0'
dependencies['dayjs'] = '^1.11.19'
dependencies['lodash-es'] = '^4.17.22'
dependencies['radash'] = '^12.1.0'
dependencies['react'] = '^19.1.0'
dependencies['react-dom'] = '^19.1.0'
dependencies['react-router-dom'] = '^7.6.1'
dependencies['uuid'] = '^11.1.0'
dependencies['zustand'] = '^5.0.5'

// 可选依赖
if (config.i18n) {
  dependencies['i18next'] = '^25.2.1'
  dependencies['react-i18next'] = '^15.5.2'
}

if (config.routeMode === 'file-system') {
  dependencies['vite-plugin-pages'] = '^0.32.5'
}

if (config.qiankun) {
  dependencies['vite-plugin-qiankun'] = '^1.0.15'
}

if (config.sentry) {
  dependencies['@sentry/react'] = '^9.27.0'
  dependencies['@sentry/vite-plugin'] = '^3.5.0'
}

// 按字母排序
const sortedDependencies = Object.keys(dependencies).sort().reduce((obj, key) => {
  obj[key] = dependencies[key]
  return obj
}, {})

// 构建完整的 package.json 对象
const packageJson = {
  name: config.projectName,
  version: '0.0.0',
  type: 'module',
  private: true,
  engines: {
    node: '>=20.18.0'
  },
  packageManager: 'pnpm@10.8.0',
  scripts: {
    dev: 'vite',
    build: 'vite build --mode production',
    'build:zip': 'vite build --mode production && tsx scripts/build.mts',
    preview: 'vite preview',
    'type-check': 'tsc --noEmit',
    'lint:eslint': 'eslint . --fix',
    prepare: 'node .husky/install.mjs',
    'lint-staged': 'lint-staged',
    commit: 'git add . && git-cz'
  },
  postcss: {
    plugins: {
      tailwindcss: {},
      autoprefixer: {}
    }
  },
  'lint-staged': {
    '*.{js,jsx,ts,tsx,css,scss,less}': [
      'eslint --fix --no-warn-ignored'
    ]
  },
  config: {
    commitizen: {
      path: 'cz-customizable'
    },
    'cz-customizable': {
      config: '.cz-config.cjs'
    }
  },
  dependencies: sortedDependencies,
  devDependencies: {
    '@commitlint/cli': '^19.8.0',
    '@commitlint/config-conventional': '^19.8.0',
    '@moluoxixi/ajax-package': '^0.0.11-beta.2',
    '@moluoxixi/css-module-global-root-plugin': '^0.0.5',
    '@moluoxixi/eslint-config': '^0.0.10',
    '@moluoxixi/vite-config': '^0.0.27',
    '@types/crypto-js': '^4.2.2',
    '@types/lodash': '^4.17.17',
    '@types/node': '^22.14.0',
    '@types/react': '^19.1.6',
    '@types/react-dom': '^19.1.6',
    '@types/uuid': '^10.0.0',
    '@vitejs/plugin-react': '^4.5.1',
    autoprefixer: '^10.4.20',
    commitizen: '^4.3.1',
    compressing: '^1.10.1',
    'cz-customizable': '^7.4.0',
    dotenv: '^16.5.0',
    eslint: '^9.22.0',
    'eslint-plugin-format': '^1.0.1',
    husky: '^9.1.7',
    jiti: '^2.4.2',
    'lint-staged': '^15.5.1',
    postcss: '^8.5.3',
    sass: '^1.87.0',
    'sass-embedded': '^1.87.0',
    'sass-loader': '^16.0.5',
    tailwindcss: '^4.0.0',
    tsx: '^4.19.2',
    typescript: '~5.8.0',
    vite: '^6.2.4'
  },
  author: config.author || '',
  license: 'MIT'
}
-%>
<%- JSON.stringify(packageJson, null, 2) %>
